<style>
  .mapped span {
    border: 1px solid green !important;
  }

  .mapped>span:after {
    border: solid green !important;
    border-width: 0 2px 2px 0 !important;
    left: 6px;
    top: 2px;
    width: 5px;
    height: 10px;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
  }

  .mapped-outline>input:checked~span,
  .mapped>span:hover {
    border: 1px solid green !important;
  }

  .not-mapped span {
    border: 1px solid red !important;
  }

  .not-mapped>span:after {
    border: solid red !important;
    border-width: 0 2px 2px 0 !important;
    left: 6px;
    top: 2px;
    width: 5px;
    height: 10px;
    border-width: 0 2px 2px 0;
    transform: rotate(45deg);
  }

  .not-mapped-outline>input:checked~span,
  .not-mapped>span:hover {
    border: 1px solid red !important;
  }
  .padLess_table th, .padLess_table td {
    padding: 1px 5px !important;
  }
  /*  */
</style>
<div class="popup-static portlet box portlet-fullscreen inv_modal" *ngIf="showAddPage">
  <div class="portlet-body form">
    <!-- <div class="row"> -->
    <div class="col-md-12">
      <div class="modelbox-div clearfix">
        <div class="caption lb-caption no-margin" style="padding: 5px 15px !important;">
          <h3> <span style="    color: blue ; font-size: larger;">Create Ledger</span> </h3>
          <a class="btn btn-danger" (click)="Close()" title="Cancel">X</a>
        </div>       
        <div class="sub-navtab">
          <ul class="nav nav-tabs">
            <li
              [rbac-permission]="{'name':'accounting-create-default-ledger-button-permission','actionOnInvalid':'hidden'}">
              <a [ngClass]="{'a-tab-active':ledgerType=='ledger'}" (click)="ToggleLedgerType('ledger')">Default
                Ledger</a>
            </li>
            <li
              [rbac-permission]="{'name':'accounting-create-billing-item-ledger-button-permission','actionOnInvalid':'hidden'}">
              <a [ngClass]="{'a-tab-active':ledgerType=='billingincomeledger'}"
                (click)="ToggleLedgerType('billingincomeledger')">Billing Ledgers</a>
            </li>
            <li
              [rbac-permission]="{'name':'accounting-create-phrm-supplier-ledger-button-permission','actionOnInvalid':'hidden'}">
              <a [ngClass]="{'a-tab-active':ledgerType=='pharmacysupplier'}"
                (click)="ToggleLedgerType('pharmacysupplier')">PHARMACY SUPPLIER</a>
            </li>
            <li
              [rbac-permission]="{'name':'accounting-create-consultant-credit-ledger-button-permission','actionOnInvalid':'hidden'}">
              <a [ngClass]="{'a-tab-active':ledgerType=='consultant'}"
                (click)="ToggleLedgerType('consultant')">CONSULTANT (CREDIT A/C)</a>
            </li>
            <li
              [rbac-permission]="{'name':'accounting-create-credit-organization-ledger-button-permission','actionOnInvalid':'hidden'}">
              <a [ngClass]="{'a-tab-active':ledgerType=='creditorganization'}"
                (click)="ToggleLedgerType('creditorganization')"> CREDIT ORGANIZATIONS</a>
            </li>
            <li
              [rbac-permission]="{'name':'accounting-create-inventory-vendor-ledger-button-permission','actionOnInvalid':'hidden'}">
              <a [ngClass]="{'a-tab-active':ledgerType=='inventoryvendor'}"
                (click)="ToggleLedgerType('inventoryvendor')">INVENTORY VENDOR</a>
            </li>
            <li
              [rbac-permission]="{'name':'accounting-create-inventory-subcategory-ledger-button-permission','actionOnInvalid':'hidden'}">
              <a [ngClass]="{'a-tab-active':ledgerType=='inventorysubcategory'}"
                (click)="ToggleLedgerType('inventorysubcategory')">INVENTORY SUBCATEGORY</a>
            </li>

          </ul>
        </div>       
        <div class="form-body" style="padding-top: 0px !important;">
          <form [formGroup]="CurrentLedger.LedgerValidator" class="hm-form clearfix">
            <div class="row" style="padding-top: 5px; background-color: #c9c6e3;">
              <div class="form-group col-md-4" style="margin-bottom:0px !important;">
                <label class="control-label no-padding col-md-3">Primary Group<sup>*</sup><b>:</b></label>
                <div class="col-md-6">                
                  <select class="form-control" maxlength="30" type="text" [(ngModel)]="CurrentLedger.PrimaryGroup"
                    id="PrimaryGroup" (change)="PrimaryGroupChanged()" placeholder="PrimaryGroup"
                    formControlName="PrimaryGroup">
                    <option *ngFor="let pg of primaryGroupList" [disabled]="(!typeledger)" value={{pg.PrimaryGroupName}}>{{pg.PrimaryGroupName}}</option>
                  </select>
                  <span class="color-red font-sm"
                    [hidden]="CurrentLedger.IsValidCheck('PrimaryGroup','required') || !(CurrentLedger.IsDirty('PrimaryGroup'))">primary
                    group is required</span> <span class="color-red font-sm"
                    *ngIf="CurrentLedger.IsDirty('PrimaryGroup')"
                    [hidden]="CurrentLedger.IsValidCheck('PrimaryGroup','maxlength')"> Length is not proper</span>
                </div>
              </div>
              <div class="form-group col-md-4" style="margin-bottom:0px !important;">
                <label class="control-label no-padding  col-md-4">Chart of Accounts <sup>*</sup><b>:</b></label>
                <div class="col-md-7">
                 
                  <select class="form-control" maxlength="30" type="text" [(ngModel)]="CurrentLedger.COA" id="COA"
                    (change)="COAChanged()" placeholder="LedgerGroupName" formControlName="COA">
                    <option *ngFor="let pg of coaList"  [disabled]="(!typeledger)" value={{pg.ChartOfAccountName}}>{{pg.ChartOfAccountName}}</option>
                  </select>
                  
                  <span class="color-red font-sm"
                    [hidden]="CurrentLedger.IsValidCheck('COA','required') || !(CurrentLedger.IsDirty('COA'))">COA
                    is
                    required</span> <span class="color-red font-sm" *ngIf="CurrentLedger.IsDirty('COA')"
                    [hidden]="CurrentLedger.IsValidCheck('COA','maxlength')"> Length is not proper</span> </div>
              </div>
              <div *ngIf="!typeinventorysubcategory" class="form-group col-md-4" style="margin-bottom:0px !important;">
                <label class="control-label no-padding col-md-3">Ledger Group <sup>*</sup><b>:</b> </label>
                <div *ngIf="typeledger" class="col-md-8">
                  <div class="div-relative">
                    <input danphe-auto-complete class="col-md-11" [(ngModel)]="CurrentLedger.LedgerGroupName"
                      [source]="ledgergroupList" placeholder="Ledger GroupName" display-property-name="LedgerGroupName"
                      value-property-name="LedgerGroupName" (valueChanged)="AssignSelectedLedgerGroup()"
                      [list-formatter]="LedgerGroupListFormatter" max-num-list="20" onclick="this.select()"
                      style="background-color: azure;" formControlName="LedgerGroupName" />
                    <a class="fa fa-question" (click)="AddLedgerGroupPopUp()"
                      title="Unable to find Ledger Group ? Click to add."></a></div>
                  <br />
                  <span class="color-red" *ngIf="CurrentLedger.checkSelectedLedger==true">Please select Proper Ledger group</span>
                  <span class="color-red" *ngIf="!disabledRow">Create ledger for this ledgerGroup from respective tab</span>
                </div>
                <div *ngIf="!typeledger" class="col-md-8">
                  <input danphe-auto-complete class="col-md-11" [(ngModel)]="CurrentLedger.LedgerGroupName"
                    [source]="ledgergroupList" placeholder="Ledger GroupName" display-property-name="LedgerGroupName"
                    value-property-name="LedgerGroupName" (valueChanged)="AssignSelectedLedgerGroup()"
                    [list-formatter]="LedgerGroupListFormatter" max-num-list="10" onclick="this.select()" disabled
                    style="width:250px; background-color: azure;height:35px;" formControlName="LedgerGroupName" />
                  <span class="color-red font-sm"
                    [hidden]="CurrentLedger.IsValidCheck('LedgerGroupName','required') || !(CurrentLedger.IsDirty('LedgerGroupName'))">Leadger
                    Group Name is required</span><br />
                  <span class="color-red" *ngIf="CurrentLedger.checkSelectedLedger==true">Please select Proper
                    Ledger
                    group</span>
                </div>
              </div>
              <div *ngIf="showinventorysubcategoryAllLedgers" class="form-group col-md-4" style="margin-bottom:0px !important;">
                <label class="control-label no-padding">Ledger Group <sup>*</sup><b>:</b> </label>
                <div class="div-relative">
                  <select [(ngModel)]="CurrentLedger.LedgerGroupId" (ngModelChange)="onledgerGroupChange()"
                    id="ledgergroup" formControlName="LedgerGroupName" style="width: 100%;">
                    <option *ngFor="let v of ledgergroupList" value="{{v.LedgerGroupId}}">{{v.LedgerGroupName}}</option>
                  </select>
                  <br />
                  <span class="color-red" *ngIf="CurrentLedger.checkSelectedLedger==true">Please select Proper Ledger
                    group</span>
                </div>
              </div>

            </div>
          </form>
          
          <!-- Start : Ledgers list table -->
          <!--START: default ledger add -->
          <div *ngIf="!typeBillingLedger && !typeConsultant && !typeCreditOrganization && !typeInventoryVendor && !typesupplier && !typeinventorysubcategory && disabledRow" style="padding: 5px;min-height: 400px !important;">
            <table class="table table-striped table-hover inv_table table-bordered" >
              <thead>
                <tr>
                  <th></th>
                  <th width="70px">Code <i title="This ledger code is not final. It may change during save."
                      color=#006687 class="fa fa-info-circle" aria-hidden="true"></i></th>
                  <th> LedgerName </th>
                  <th> Desciption </th>
                  <th> Opening Balance </th>
                  <th> Opening Balance Type </th>
                  <th> Is Active </th>
                  <th> Is Cost Center Applicable </th>
                  <th></th>
                  <th></th>
                </tr>
              </thead>
              <tbody *ngIf="disabledRow">
                <tr *ngFor="let itm of NewledgerList; let i = index">
                  <td><b>{{i+1}}</b></td>
                  <td><b>{{itm.Code}}</b></td>
                  <td>
                    <form [formGroup]="itm.LedgerValidator">
                      <div *ngIf="typeledger">
                        <input danphe-auto-complete [(ngModel)]="itm.LedgerName" [source]="ledgerList"
                          placeholder="Ledger Name" display-property-name="LedgerName" value-property-name="LedgerName"
                          (focusout)="CheckDuplicateLedger(i)" [list-formatter]="LedgerListFormatter"
                          max-num-list="10" onclick="this.select()" style="background-color: azure;"
                          formControlName="LedgerName"/>
                        <span class="color-red font-sm"
                          [hidden]="itm.IsValidCheck('LedgerName','required') || !(itm.IsDirty('LedgerName'))">Ledger
                          Name is required</span> <span class="color-red font-sm" *ngIf="itm.IsDirty('LedgerName')"
                          [hidden]="itm.IsValidCheck('LedgerName','maxlength')"> Length is not proper</span> </div>
                    </form>
                  </td>
                  <td>
                    <div class="form-group no-margin">
                      <input class="form-control" maxlength="200" type="text" title="itm.Description"
                        [(ngModel)]="itm.Description" [ngModelOptions]="{standalone: true}" id="Description"
                        placeholder="Description" />
                    </div>
                  </td>
                  <td><input class="form-control" maxlength="200" type="text" title="itm.OpeningBalance"
                      [(ngModel)]="itm.OpeningBalance" [ngModelOptions]="{standalone: true}" id="OpeningBalance"
                      placeholder="Opening Balance" /></td>
                  <td>
                    <form [formGroup]="itm.LedgerValidator">
                      <div class="row">
                        <div class="col-md-6">
                          <div class="input-group">
                            <div class="icheck-inline">
                              <label class="mt-checkbox mt-checkbox-outline">
                                <input id="Dr" name="Dr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                  [(ngModel)]="itm.Dr" formControlName="Dr" />
                                <span></span> Dr</label>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-6">
                          <div class="input-group col-md-9">
                            <div class="icheck-inline">
                              <label class="mt-checkbox mt-checkbox-outline">
                                <input id="Cr" name="Cr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                  [(ngModel)]="itm.Cr" formControlName="Cr" />
                                <span></span> Cr</label>
                            </div>
                          </div>
                        </div>
                      </div>
                      <span class="color-red font-sm"
                        [hidden]="(itm.IsValidCheck('Dr','required') || !(itm.IsDirty('Dr')))
                                                    ||(itm.IsValidCheck('Cr','required') || !(itm.IsDirty('Cr')))">Opening
                        Balance Type is required</span>
                    </form>
                  </td>
                  <td>
                    <div class="form-group">
                      <div class="input-group" style="display: block; text-align: center;">
                        <div class="icheck-inline">
                          <label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            <input id="isActive" type="checkbox" [(ngModel)]="itm.IsActive"
                              [ngModelOptions]="{standalone: true}" />
                            <span></span> </label>
                        </div>
                      </div>
                    </div>
                  </td>
                  <td>
                    <div class="form-group">
                      <div class="input-group" style="display: block; text-align: center;">
                        <div class="icheck-inline">
                          <label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            <input id="isActive" type="checkbox" [(ngModel)]="itm.IsCostCenterApplicable"
                              [ngModelOptions]="{standalone: true}" />
                            <span></span> </label>
                        </div>
                      </div>
                    </div>
                  </td>
                  <td><a (click)="AddNewLedger()" title="Click to add Ledger."><i
                        class="fa fa-plus btn btn-success"></i></a></td>
                  <td><a (click)="DeleteLedgerRow(i)" title="Alt+X,Alt+Delete,Click to remove this item"><i
                        class="btn btn-danger fa fa-times"></i></a></td>
                </tr>
              </tbody>
            </table>
          </div>      
          <!--END: default ledger add-->  

          <div class="row">         
             <!-- START: Pharmacy Supplier -->
             <div *ngIf="typesupplier">
              <div class="">
                <div class="icheck-inline" style="padding-top: 5px;">
                  <div class="col-md-3">
                    <input type="text" class="search-textbox" [(ngModel)]="ledgerSearchKey"
                      placeholder="type here to search Supplier" (ngModelChange)="filterSelectedLedger(ledgerSearchKey)"
                      onclick="this.select()" />
                  </div>
                  <div class="col-md-1">
                    <label class="mt-checkbox mt-checkbox-outline">
                      <input name="showpharmsuplierALLLedger" type="radio" checked="checked"
                        (change)="TogglePhrmSupplierLedger()">
                      <span> </span> <b> All </b> </label> <label *ngIf="totalLedger>0">( {{totalLedger}} ) </label>
                  </div>
                  <div class="col-md-6">
                    <label class="mt-checkbox mt-checkbox-outline mapped mapped-outline" style="color: green;">
                      <input name="showpharmsuplierALLLedger" type="radio" (change)="TogglePhrmSupplierLedger('true')">
                      <span> </span> <b> Pharmacy Supplier with Account head </b> </label> <label
                      *ngIf="mappedLedger>0"> (
                      {{mappedLedger}} ) </label>
                    <label class="mt-checkbox mt-checkbox-outline not-mapped not-mapped-outline"
                      style="color: red; margin-left: 20px !important;">
                      <input name="showpharmsuplierALLLedger" type="radio" (change)="TogglePhrmSupplierLedger('false')">
                      <span> </span> <b> Pharmacy Supplier without Account head </b> </label> <label
                      *ngIf="notmappedLedger>0">
                      ( {{notmappedLedger}} ) </label>
                  </div>
                  <div class="col-md-2">
                    <label> <span> </span> <b style="color: #7cb3ea;"> Total selected Ledgers : </b> <b>
                        {{selectedLedgerCount}} </b> </label>
                  </div>
                </div>
              </div>
              <div class="col-md-12 " style="margin-bottom: 15px;">
                <div class="table-responsive tbl-trns-itm-holder table-wrapper" style="height: 400px;">
                  <table class="table table-striped table-hover custom_table padLess_table"
                    style="width: 150vw !important; ">
                    <thead style="text-align: center;">
                      <tr>
                        <th> <label class="mt-checkbox mt-checkbox-outline" style="margin: 10px !important;">
                            <input id="isActive" type="checkbox" [(ngModel)]="isSelectAll"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SelectAllChkOnChange()" />
                            <span></span> </label>
                        </th>
                        <!-- <th> Department</th> -->
                        <th style="width: 10%;"> Supplier</th>
                        <th> Ledger Code </th>
                        <th style="width: 15%;"> Ledger Name </th>
                        <th style="width: 15%;"> Description </th>
                        <th style="width: 7%;"> Opening Balance </th>
                        <th style="width: 10%;"> Opening Balance Type </th>
                        <th> Active </th>
                        <th style="width: 7%;"> TDS Percent</th>
                        <th style="width: 10%;"> PANNo </th>
                        <th style="width: 10%;"> Address </th>
                        <th style="width: 10%;"> Mobile No. </th>
                        <th style="width: 10%;"> Landline No. </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let led of phrmSupplierList; let i = index">
                        <td style="text-align: center;">
                          <label
                            [ngClass]="{'mapped': led.IsMapped==true, 'mapped-outline': led.IsMapped==true, 'not-mapped': led.IsMapped==false, 'not-mapped-outline': led.IsMapped==false}"
                            class="mt-checkbox mt-checkbox-outline">
                            <input id="isActive" type="checkbox" [(ngModel)]="led.IsSelected"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SingleCkboxChange(i)" />
                            <span></span>
                          </label>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            {{led.SupplierName }}</label></td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel"> {{led.Code }}</label></td>
                        <td><input danphe-auto-complete class="form-control" [(ngModel)]="led.LedgerName"
                            [source]="ledgerListAutoComplete" placeholder="Ledger Name"
                            display-property-name="LedgerName" value-property-name=null [grid-sort]="'LedgerName'"
                            (focusout)="AssignSelectedLedger(i)"  [list-formatter]="LedgerListFormatter"
                            max-num-list="15" onclick="this.select()" id="Ledger_{{i+1}}" match-formatted="true"
                            style="width: 100%;" [ngStyle]="{'color':led.IsMapped==true ? 'green' : 'red' }"
                            [disabled]="!led.IsSelected" />
                        </td>
                        <td>
                          <input [(ngModel)]="led.Description" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="Description" [disabled]="!led.IsSelected" type="text"
                            maxlength="200"></td>
                        <td><input [(ngModel)]="led.OpeningBalance" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="OpeningBalance" [disabled]="!led.IsSelected" type="number"
                            maxlength="20"></td>
                        <td>
                          <form [formGroup]="led.LedgerValidator">
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Dr" name="Dr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Dr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Dr</label>
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Cr" name="Cr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Cr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Cr </label>
                            <!-- <span class="color-red font-sm"
                                [hidden]="(led.IsValidCheck('Dr','required') || !(led.IsDirty('Dr'))) ||(led.IsValidCheck('Cr','required') || !(led.IsDirty('Cr')))">Opening
                                Balance Type is required</span> -->
                          </form>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline">
                            <input id="IsActive" name="IsActive" type="checkbox"
                              (click)="ChangeOpeningBalType($event, i)" [(ngModel)]="led.IsActive"
                              [ngModelOptions]="{standalone: true}" [disabled]="!led.IsSelected" />
                            <span></span>Active </label></td>
                        <td><input [(ngModel)]="led.TDSPercent" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="TDSPercent" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                        <td><input [(ngModel)]="led.PANNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="PANNo" [disabled]="!led.IsSelected" type="text" maxlength="20"></td>
                        <td><input [(ngModel)]="led.Address" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="Address" [disabled]="!led.IsSelected" type="text" maxlength="200"></td>
                        <td><input [(ngModel)]="led.MobileNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="MobileNo" [disabled]="!led.IsSelected" type="number" max="20"></td>
                        <td><input [(ngModel)]="led.LandlineNo" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="LandlineNo" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- END: Pharmacy Supplier -->

            <!-- START: consultant-->
            <div *ngIf="typeConsultant">
              <div class="">
                <div class="icheck-inline" style="padding-top: 5px;">
                  <div class="col-md-3">
                    <input type="text" class="search-textbox" [(ngModel)]="ledgerSearchKey"
                      placeholder="type here to search consultant"
                      (ngModelChange)="filterSelectedLedger(ledgerSearchKey)" onclick="this.select()" />
                  
                  </div>
                  <div class="col-md-1">
                    <label class="mt-checkbox mt-checkbox-outline">
                      <input name="showpharmsuplierALLLedger" type="radio" checked="checked"
                        (change)="ToggleEmpLedger()">
                      <span> </span> <b> All </b> </label> <label *ngIf="totalLedger>0">( {{totalLedger}} ) </label>
                  </div>
                  <div class="col-md-6">
                    <label class="mt-checkbox mt-checkbox-outline mapped mapped-outline" style="color: green;">
                      <input name="showpharmsuplierALLLedger" type="radio" (change)="ToggleEmpLedger('true')">
                      <span> </span> <b> Consultant with Account head </b> </label> <label *ngIf="mappedLedger>0"> (
                      {{mappedLedger}} ) </label>
                    <label class="mt-checkbox mt-checkbox-outline not-mapped not-mapped-outline"
                      style="color: red; margin-left: 20px !important;">
                      <input name="showpharmsuplierALLLedger" type="radio" (change)="ToggleEmpLedger('false')">
                      <span> </span> <b> Consultant without Account head </b> </label> <label *ngIf="notmappedLedger>0">
                      ( {{notmappedLedger}} ) </label>
                  </div>
                  <div class="col-md-2">
                    <label> <span> </span> <b style="color: #7cb3ea;"> Total selected Ledgers : </b> <b>
                        {{selectedLedgerCount}} </b> </label>
                  </div>
                </div>
              </div>
              <div class="col-md-12 " style="margin-bottom: 15px;">
                <div class="table-responsive tbl-trns-itm-holder table-wrapper" style="height: 400px;">
                  <table class="table table-striped table-hover custom_table padLess_table"
                    style="width: 150vw !important; ">
                    <thead style="text-align: center;">
                      <tr>
                        <th> <label class="mt-checkbox mt-checkbox-outline" style="margin: 10px !important;">
                            <input id="isActive" type="checkbox" [(ngModel)]="isSelectAll"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SelectAllChkOnChange()" />
                            <span></span> </label>
                        </th>
                        <th> Department</th>
                        <th style="width: 10%;"> EmployeeName</th>
                        <th> Ledger Code </th>
                        <th style="width: 15%;"> Ledger Name </th>
                        <th style="width: 15%;"> Description </th>
                        <th style="width: 7%;"> Opening Balance </th>
                        <th style="width: 10%;"> Opening Balance Type </th>
                        <th> Active </th>
                        <th style="width: 7%;"> TDS Percent</th>
                        <th style="width: 10%;"> PANNo </th>
                        <th style="width: 10%;"> Address </th>
                        <th style="width: 10%;"> Mobile No. </th>
                        <th style="width: 10%;"> Landline No. </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let led of employeeList; let i = index">
                        <td style="text-align: center;">
                          <label
                            [ngClass]="{'mapped': led.IsMapped==true, 'mapped-outline': led.IsMapped==true, 'not-mapped': led.IsMapped==false, 'not-mapped-outline': led.IsMapped==false}"
                            class="mt-checkbox mt-checkbox-outline">
                            <input id="isActive" type="checkbox" [(ngModel)]="led.IsSelected"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SingleCkboxChange(i)" />
                            <span></span>
                          </label>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            {{led.DepartmentName }}</label></td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            {{led.EmployeeName }}</label></td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel"> {{led.Code }}</label></td>
                        <td><input danphe-auto-complete class="form-control" [(ngModel)]="led.LedgerName"
                            [source]="ledgerListAutoComplete" placeholder="Ledger Name"
                            display-property-name="LedgerName" value-property-name=null [grid-sort]="'LedgerName'"
                            (focusout)="AssignSelectedLedger(i)"  [list-formatter]="LedgerListFormatter"
                            max-num-list="15" onclick="this.select()" id="Ledger_{{i+1}}" match-formatted="true"
                            style="width: 100%;" [ngStyle]="{'color':led.IsMapped==true ? 'green' : 'green' }"
                            [disabled]="!led.IsSelected" />
                        </td>
                        <td>
                          <input [(ngModel)]="led.Description" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="Description" [disabled]="!led.IsSelected" type="text"
                            maxlength="200"></td>
                        <td><input [(ngModel)]="led.OpeningBalance" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="OpeningBalance" [disabled]="!led.IsSelected" type="number"
                            maxlength="20"></td>
                        <td>
                          <form [formGroup]="led.LedgerValidator">
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Dr" name="Dr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Dr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Dr</label>
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Cr" name="Cr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Cr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Cr </label>
                            <!-- <span class="color-red font-sm"
                                [hidden]="(led.IsValidCheck('Dr','required') || !(led.IsDirty('Dr'))) ||(led.IsValidCheck('Cr','required') || !(led.IsDirty('Cr')))">Opening
                                Balance Type is required</span> -->
                          </form>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline">
                            <input id="IsActive" name="IsActive" type="checkbox"
                              (click)="ChangeOpeningBalType($event, i)" [(ngModel)]="led.IsActive"
                              [ngModelOptions]="{standalone: true}" [disabled]="!led.IsSelected" />
                            <span></span>Active </label></td>
                        <td><input [(ngModel)]="led.TDSPercent" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="TDSPercent" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                        <td><input [(ngModel)]="led.PANNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="PANNo" [disabled]="!led.IsSelected" type="text" maxlength="20"></td>
                        <td><input [(ngModel)]="led.Address" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="Address" [disabled]="!led.IsSelected" type="text" maxlength="200"></td>
                        <td><input [(ngModel)]="led.MobileNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="MobileNo" [disabled]="!led.IsSelected" type="number" max="20"></td>
                        <td><input [(ngModel)]="led.LandlineNo" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="LandlineNo" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!--END: consultant-->

            <!-- START: Billing Items Ledger -->
            <div *ngIf="typeBillingLedger">
            
              <div class="">
                <div class="icheck-inline" style="padding-top: 5px;">
                  <div class="col-md-3">
                    <input type="text" class="search-textbox" [(ngModel)]="ledgerSearchKey"
                      placeholder="type here to search Billings Ledger"
                      (ngModelChange)="filterSelectedLedger(ledgerSearchKey)" onclick="this.select()" />
                      </div>
                  <div class="col-md-2">
                    <label class="mt-checkbox mt-checkbox-outline">
                      <input name="showBillingsLedger" type="radio" checked="checked"
                        (change)="ToggleBillingLedger()">
                      <span> </span> <b> All &nbsp; ({{totalLedger}}) </b> </label>                      
                  </div>
                  <div class="col-md-5">
                    <label class="mt-checkbox mt-checkbox-outline mapped mapped-outline" style="color: green;">
                      <input name="showBillingsLedger" type="radio" (change)="ToggleBillingLedger('true')">
                      <span> </span> <b>Ledger with Account head &nbsp; ({{mappedLedger}})  </b> </label>                      
                    <label class="mt-checkbox mt-checkbox-outline not-mapped not-mapped-outline"
                      style="color: red; margin-left: 0px !important;">
                      <input name="showBillingsLedger"  type="radio" (change)="ToggleBillingLedger('false')">
                      <span> </span> <b>Ledger without Account head ({{notmappedLedger}})</b> </label> 
                  </div>
                  <div class="col-md-2">
                    <label> <span> </span> <b style="color: #7cb3ea;">selected Ledgers :  {{selectedLedgerCount}} </b> </label>
                  </div>
                </div>
              </div>
              <div class="col-md-12 " style="margin-bottom: 15px;">
                <cdk-virtual-scroll-viewport   style="height: 400px" [itemSize]="10" >
                  <div  class="table-responsive">                    
                  <table class="table table-striped table-hover custom_table padLess_table"
                  style="width: 150vw !important; ">
                  
                    <thead style="text-align: center;">
                      <tr style="background-color: #044c7d !important;
                      color: white !important;">
                        <th> <label class="mt-checkbox mt-checkbox-outline" style="margin: 10px !important;">
                            <input id="isActive" type="checkbox" [(ngModel)]="isSelectAll"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SelectAllChkOnChange()" />
                            <span></span> </label>
                        </th>
                        <th style="width: 10%;"> Serivce Department Name</th>
                        <th style="width: 10%;"> Item Name</th>
                        <th> Ledger Code </th>
                        <th style="width: 15%;"> Ledger Name </th>
                        <th style="width: 15%;"> Description </th>
                        <th style="width: 7%;"> Opening Balance </th>
                        <th style="width: 10%;"> Opening Balance Type </th>
                        <th> Active </th>
                        <th style="width: 7%;"> TDS Percent</th>
                        <th style="width: 10%;"> PANNo </th>
                        <th style="width: 10%;"> Address </th>
                        <th style="width: 10%;"> Mobile No. </th>
                        <th style="width: 10%;"> Landline No. </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *cdkVirtualFor="let led of billingsledgers;  let i = index" >
                        <td style="text-align: center;">
                          <label
                            [ngClass]="{'mapped': led.IsMapped==true, 'mapped-outline': led.IsMapped==true, 'not-mapped': led.IsMapped==false, 'not-mapped-outline': led.IsMapped==false}"
                            class="mt-checkbox mt-checkbox-outline">
                            <input id="isActive" type="checkbox" [(ngModel)]="led.IsSelected"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SingleCkboxChange(i)" />
                            <span></span>
                          </label>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            {{led.ServiceDepartmentName }}</label></td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel"> {{led.ItemName }}</label></td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel"> {{led.Code }}</label></td>
                        <td><input danphe-auto-complete class="form-control" [(ngModel)]="led.LedgerName"
                            [source]="ledgerListAutoComplete" placeholder="Ledger Name"
                            display-property-name="LedgerName" value-property-name=null [grid-sort]="'LedgerName'"
                            (focusout)="AssignSelectedBillingLedger(i)" [list-formatter]="LedgerListFormatter"
                            max-num-list="15" onclick="this.select()" id="Ledger_{{i+1}}" match-formatted="true"
                            style="width: 100%;" [ngStyle]="{'color':led.IsMapped==true ? 'green' : 'green' }"
                            [disabled]="!led.IsSelected" />
                        </td>
                        <td>
                          <input [(ngModel)]="led.Description" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="Description" [disabled]="!led.IsSelected" type="text"
                            maxlength="200"></td>
                        <td>
                          <input [(ngModel)]="led.OpeningBalance" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="OpeningBalance" [disabled]="!led.IsSelected" type="number"
                            maxlength="20"></td>
                        <td>
                          <form [formGroup]="led.LedgerValidator">
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Dr" name="Dr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Dr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Dr</label>
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Cr" name="Cr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Cr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Cr </label>
                          </form>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline">
                            <input id="IsActive" name="IsActive" type="checkbox"
                              (click)="ChangeOpeningBalType($event, i)" [(ngModel)]="led.IsActive"
                              [ngModelOptions]="{standalone: true}" [disabled]="!led.IsSelected" />
                            <span></span>Active </label></td>
                        <td><input [(ngModel)]="led.TDSPercent" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="TDSPercent" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                        <td><input [(ngModel)]="led.PANNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="PANNo" [disabled]="!led.IsSelected" type="text" maxlength="20"></td>
                        <td><input [(ngModel)]="led.Address" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="Address" [disabled]="!led.IsSelected" type="text" maxlength="200"></td>
                        <td><input [(ngModel)]="led.MobileNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="MobileNo" [disabled]="!led.IsSelected" type="number" max="20"></td>
                        <td><input [(ngModel)]="led.LandlineNo" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="LandlineNo" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                      </tr>
                    </tbody>
                  </table>                    
                </div>             
                </cdk-virtual-scroll-viewport>          
              </div>
            </div>
            <!-- END: Billing Items Ledger -->

            <!-- START: Credit Organization -->
            <div *ngIf="typeCreditOrganization">
              <div class="">
                <div class="icheck-inline" style="padding-top: 5px;">
                  <div class="col-md-3">
                    <input type="text" class="search-textbox" [(ngModel)]="ledgerSearchKey"
                      placeholder="type here to search Credit Organizations"
                      (ngModelChange)="filterSelectedLedger(ledgerSearchKey)" onclick="this.select()" />
                  </div>
                  <div class="col-md-1">
                    <label class="mt-checkbox mt-checkbox-outline">
                      <input name="showpharmsuplierALLLedger" type="radio" checked="checked"
                        (change)="ToggleCreditOrgLedger()">
                      <span> </span> <b> All </b> </label> <label *ngIf="totalLedger>0">( {{totalLedger}} ) </label>
                  </div>
                  <div class="col-md-6">
                    <label class="mt-checkbox mt-checkbox-outline mapped mapped-outline" style="color: green;">
                      <input name="showpharmsuplierALLLedger" type="radio" (change)="ToggleCreditOrgLedger('true')">
                      <span> </span> <b> Credit Organizations with Account head </b> </label> <label
                      *ngIf="mappedLedger>0"> (
                      {{mappedLedger}} ) </label>
                    <label class="mt-checkbox mt-checkbox-outline not-mapped not-mapped-outline"
                      style="color: red; margin-left: 20px !important;">
                      <input name="showpharmsuplierALLLedger" type="radio" (change)="ToggleCreditOrgLedger('false')">
                      <span> </span> <b> Credit Organizations without Account head </b> </label> <label
                      *ngIf="notmappedLedger>0">
                      ( {{notmappedLedger}} ) </label>
                  </div>
                  <div class="col-md-2">
                    <label> <span> </span> <b style="color: #7cb3ea;"> Total selected Ledgers : </b> <b>
                        {{selectedLedgerCount}} </b> </label>
                  </div>
                </div>
              </div>
              <div class="col-md-12 " style="margin-bottom: 15px;">
                <div class="table-responsive tbl-trns-itm-holder table-wrapper" style="height: 400px;">
                  <table class="table table-striped table-hover custom_table padLess_table"
                    style="width: 150vw !important; ">
                    <thead style="text-align: center;">
                      <tr>
                        <th> <label class="mt-checkbox mt-checkbox-outline" style="margin: 10px !important;">
                            <input id="isActive" type="checkbox" [(ngModel)]="isSelectAll"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SelectAllChkOnChange()" />
                            <span></span> </label>
                        </th>
                        <!-- <th> Department</th> -->
                        <th style="width: 10%;"> OrganizationName</th>
                        <th> Ledger Code </th>
                        <th style="width: 15%;"> Ledger Name </th>
                        <th style="width: 15%;"> Description </th>
                        <th style="width: 7%;"> Opening Balance </th>
                        <th style="width: 10%;"> Opening Balance Type </th>
                        <th> Active </th>
                        <th style="width: 7%;"> TDS Percent</th>
                        <th style="width: 10%;"> PANNo </th>
                        <th style="width: 10%;"> Address </th>
                        <th style="width: 10%;"> Mobile No. </th>
                        <th style="width: 10%;"> Landline No. </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let led of creditOrgizerList; let i = index">
                        <td style="text-align: center;">
                          <label
                            [ngClass]="{'mapped': led.IsMapped==true, 'mapped-outline': led.IsMapped==true, 'not-mapped': led.IsMapped==false, 'not-mapped-outline': led.IsMapped==false}"
                            class="mt-checkbox mt-checkbox-outline">
                            <input id="isActive" type="checkbox" [(ngModel)]="led.IsSelected"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SingleCkboxChange(i)" />
                            <span></span>
                          </label>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            {{led.OrganizationName }}</label></td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel"> {{led.Code }}</label></td>
                        <td><input danphe-auto-complete class="form-control" [(ngModel)]="led.LedgerName"
                            [source]="ledgerListAutoComplete" placeholder="Ledger Name"
                            display-property-name="LedgerName" value-property-name=null [grid-sort]="'LedgerName'"
                            (focusout)="AssignSelectedLedger(i)" [list-formatter]="LedgerListFormatter"
                            max-num-list="15" onclick="this.select()" id="Ledger_{{i+1}}" match-formatted="true"
                            style="width: 100%;" [ngStyle]="{'color':led.IsMapped==true ? 'green' : 'red' }"
                            [disabled]="!led.IsSelected" />
                        </td>
                        <td>
                          <input [(ngModel)]="led.Description" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="Description" [disabled]="!led.IsSelected" type="text"
                            maxlength="200"></td>
                        <td><input [(ngModel)]="led.OpeningBalance" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="OpeningBalance" [disabled]="!led.IsSelected" type="number"
                            maxlength="20"></td>
                        <td>
                          <form [formGroup]="led.LedgerValidator">
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Dr" name="Dr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Dr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Dr</label>
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Cr" name="Cr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Cr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Cr </label>
                            <!-- <span class="color-red font-sm"
                                [hidden]="(led.IsValidCheck('Dr','required') || !(led.IsDirty('Dr'))) ||(led.IsValidCheck('Cr','required') || !(led.IsDirty('Cr')))">Opening
                                Balance Type is required</span> -->
                          </form>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline">
                            <input id="IsActive" name="IsActive" type="checkbox"
                              (click)="ChangeOpeningBalType($event, i)" [(ngModel)]="led.IsActive"
                              [ngModelOptions]="{standalone: true}" [disabled]="!led.IsSelected" />
                            <span></span>Active </label></td>
                        <td><input [(ngModel)]="led.TDSPercent" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="TDSPercent" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                        <td><input [(ngModel)]="led.PANNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="PANNo" [disabled]="!led.IsSelected" type="text" maxlength="20"></td>
                        <td><input [(ngModel)]="led.Address" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="Address" [disabled]="!led.IsSelected" type="text" maxlength="200"></td>
                        <td><input [(ngModel)]="led.MobileNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="MobileNo" [disabled]="!led.IsSelected" type="number" max="20"></td>
                        <td><input [(ngModel)]="led.LandlineNo" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="LandlineNo" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- END: Credit Organization -->

            <!-- START: Inventory Vendor -->
            <div *ngIf="typeInventoryVendor">
              <div class="">
                <div class="icheck-inline" style="padding-top: 5px;">
                  <div class="col-md-3">
                    <input type="text" class="search-textbox" [(ngModel)]="ledgerSearchKey"
                      placeholder="type here to search Inventory Vendor"
                      (ngModelChange)="filterSelectedLedger(ledgerSearchKey)" onclick="this.select()" />
                   
                  </div>
                  <div class="col-md-1">
                    <label class="mt-checkbox mt-checkbox-outline">
                      <input name="showpharmsuplierALLLedger" type="radio" checked="checked"
                        (change)="ToggleInventoryVendor()">
                      <span> </span> <b> All </b> </label> <label *ngIf="totalLedger>0">( {{totalLedger}} ) </label>
                  </div>
                  <div class="col-md-6">
                    <label class="mt-checkbox mt-checkbox-outline mapped mapped-outline" style="color: green;">
                      <input name="showpharmsuplierALLLedger" type="radio" (change)="ToggleInventoryVendor('true')">
                      <span> </span> <b> Inventory Vendor with Account head </b> </label> <label *ngIf="mappedLedger>0">
                      (
                      {{mappedLedger}} ) </label>
                    <label class="mt-checkbox mt-checkbox-outline not-mapped not-mapped-outline"
                      style="color: red; margin-left: 20px !important;">
                      <input name="showpharmsuplierALLLedger" type="radio" (change)="ToggleInventoryVendor('false')">
                      <span> </span> <b> Inventory Vendor without Account head </b> </label> <label
                      *ngIf="notmappedLedger>0">
                      ( {{notmappedLedger}} ) </label>
                  </div>
                  <div class="col-md-2">
                    <label> <span> </span> <b style="color: #7cb3ea;"> Total selected Ledgers : </b> <b>
                        {{selectedLedgerCount}} </b> </label>
                  </div>
                </div>
              </div>
              <div class="col-md-12 " style="margin-bottom: 15px;">
                <div class="table-responsive tbl-trns-itm-holder table-wrapper" style="height: 400px;">
                  <table class="table table-striped table-hover custom_table padLess_table"
                    style="width: 150vw !important; ">
                    <thead style="text-align: center;">
                      <tr>
                        <th> <label class="mt-checkbox mt-checkbox-outline" style="margin: 10px !important;">
                            <input id="isActive" type="checkbox" [(ngModel)]="isSelectAll"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SelectAllChkOnChange()" />
                            <span></span> </label>
                        </th>
                        <!-- <th> Department</th> -->
                        <th style="width: 10%;"> VendorName</th>
                        <th> Ledger Code </th>
                        <th style="width: 15%;"> Ledger Name </th>
                        <th style="width: 15%;"> Description </th>
                        <th style="width: 7%;"> Opening Balance </th>
                        <th style="width: 10%;"> Opening Balance Type </th>
                        <th> Active </th>
                        <th style="width: 7%;"> TDS Percent</th>
                        <th style="width: 10%;"> PANNo </th>
                        <th style="width: 10%;"> Address </th>
                        <th style="width: 10%;"> Mobile No. </th>
                        <th style="width: 10%;"> Landline No. </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let led of inventoryVendorList; let i = index">
                        <td style="text-align: center;">
                          <label
                            [ngClass]="{'mapped': led.IsMapped==true, 'mapped-outline': led.IsMapped==true, 'not-mapped': led.IsMapped==false, 'not-mapped-outline': led.IsMapped==false}"
                            class="mt-checkbox mt-checkbox-outline">
                            <input id="isActive" type="checkbox" [(ngModel)]="led.IsSelected"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SingleCkboxChange(i)" />
                            <span></span>
                          </label>
                        </td>
                        <!-- <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            {{led.DepartmentName }}</label></td> -->
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            {{led.VendorName }}</label></td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel"> {{led.Code }}</label></td>
                        <td><input danphe-auto-complete class="form-control" [(ngModel)]="led.LedgerName"
                            [source]="ledgerListAutoComplete" placeholder="Ledger Name"
                            display-property-name="LedgerName" value-property-name=null [grid-sort]="'LedgerName'"
                            (focusout)="AssignSelectedLedger(i)" [list-formatter]="LedgerListFormatter"
                            max-num-list="15" onclick="this.select()" id="Ledger_{{i+1}}" match-formatted="true"
                            style="width: 100%;" [ngStyle]="{'color':led.IsMapped==true ? 'green' : 'red' }"
                            [disabled]="!led.IsSelected" />
                        </td>
                        <td>
                          <input [(ngModel)]="led.Description" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="Description" [disabled]="!led.IsSelected" type="text"
                            maxlength="200"></td>
                        <td><input [(ngModel)]="led.OpeningBalance" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="OpeningBalance" [disabled]="!led.IsSelected" type="number"
                            maxlength="20"></td>
                        <td>
                          <form [formGroup]="led.LedgerValidator">
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Dr" name="Dr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Dr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Dr</label>
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Cr" name="Cr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Cr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Cr </label>
                            <!-- <span class="color-red font-sm"
                                [hidden]="(led.IsValidCheck('Dr','required') || !(led.IsDirty('Dr'))) ||(led.IsValidCheck('Cr','required') || !(led.IsDirty('Cr')))">Opening
                                Balance Type is required</span> -->
                          </form>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline">
                            <input id="IsActive" name="IsActive" type="checkbox"
                              (click)="ChangeOpeningBalType($event, i)" [(ngModel)]="led.IsActive"
                              [ngModelOptions]="{standalone: true}" [disabled]="!led.IsSelected" />
                            <span></span>Active </label></td>
                        <td><input [(ngModel)]="led.TDSPercent" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="TDSPercent" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                        <td><input [(ngModel)]="led.PANNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="PANNo" [disabled]="!led.IsSelected" type="text" maxlength="20"></td>
                        <td><input [(ngModel)]="led.Address" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="Address" [disabled]="!led.IsSelected" type="text" maxlength="200"></td>
                        <td><input [(ngModel)]="led.MobileNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="MobileNo" [disabled]="!led.IsSelected" type="number" max="20"></td>
                        <td><input [(ngModel)]="led.LandlineNo" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="LandlineNo" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- END: Inventory Vendor -->

            <!-- START: Inventory Subcategory -->
            <div *ngIf="typeinventorysubcategory">
              <div class="">
                <div class="icheck-inline" style="padding-top: 5px;">
                  <div class="col-md-3">
                    <input type="text" class="search-textbox" [(ngModel)]="ledgerSearchKey"
                      placeholder="type here to search consultant"
                      (ngModelChange)="filterSelectedLedger(ledgerSearchKey)" onclick="this.select()" />
                  
                  </div>
                  <div class="col-md-1">
                    <label class="mt-checkbox mt-checkbox-outline">
                      <input name="showpharmsuplierALLLedger" type="radio" checked="checked"
                        (change)="ToggleInventorySubcategory()">
                      <span> </span> <b> All </b> </label> <label *ngIf="totalLedger>0">( {{totalLedger}} ) </label>
                  </div>
                  <div class="col-md-6">
                    <label class="mt-checkbox mt-checkbox-outline mapped mapped-outline" style="color: green;">
                      <input name="showpharmsuplierALLLedger" type="radio"
                        (change)="ToggleInventorySubcategory('true')">
                      <span> </span> <b> Inventory Subcategory with Account head </b> </label> <label
                      *ngIf="mappedLedger>0"> (
                      {{mappedLedger}} ) </label>
                    <label class="mt-checkbox mt-checkbox-outline not-mapped not-mapped-outline"
                      style="color: red; margin-left: 20px !important;">
                      <input name="showpharmsuplierALLLedger" type="radio"
                        (change)="ToggleInventorySubcategory('false')">
                      <span> </span> <b> Inventory Subcategory without Account head </b> </label> <label
                      *ngIf="notmappedLedger>0">
                      ( {{notmappedLedger}} ) </label>
                  </div>
                  <div class="col-md-2">
                    <label> <span> </span> <b style="color: #7cb3ea;"> Total selected Ledgers : </b> <b>
                        {{selectedLedgerCount}} </b> </label>
                  </div>
                </div>
              </div>
              <div class="col-md-12 " style="margin-bottom: 15px;">
                <div class="table-responsive tbl-trns-itm-holder table-wrapper" style="height: 400px;">
                  <table class="table table-striped table-hover custom_table padLess_table"
                    style="width: 150vw !important; ">
                    <thead style="text-align: center;">
                      <tr>
                        <th> <label class="mt-checkbox mt-checkbox-outline" style="margin: 10px !important;">
                            <input id="isActive" type="checkbox" [(ngModel)]="isSelectAll"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SelectAllChkOnChange()" />
                            <span></span> </label>
                        </th>
                        <!-- <th> Department</th> -->
                        <th style="width: 10%;"> Subcategory Name</th>
                        <th> Ledger Code </th>
                        <th style="width: 15%;"> Ledger Name </th>
                        <th style="width: 15%;"> Description </th>
                        <th style="width: 7%;"> Opening Balance </th>
                        <th style="width: 10%;"> Opening Balance Type </th>
                        <th> Active </th>
                        <th style="width: 7%;"> TDS Percent</th>
                        <th style="width: 10%;"> PANNo </th>
                        <th style="width: 10%;"> Address </th>
                        <th style="width: 10%;"> Mobile No. </th>
                        <th style="width: 10%;"> Landline No. </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let led of inventorySubList; let i = index">
                        <td style="text-align: center;">
                          <label
                            [ngClass]="{'mapped': led.IsMapped==true, 'mapped-outline': led.IsMapped==true, 'not-mapped': led.IsMapped==false, 'not-mapped-outline': led.IsMapped==false}"
                            class="mt-checkbox mt-checkbox-outline">
                            <input id="isActive" type="checkbox" [(ngModel)]="led.IsSelected"
                              [ngModelOptions]="{standalone: true}" (ngModelChange)="SingleCkboxChange(i)" />
                            <span></span>
                          </label>
                        </td>
                      
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel">
                            {{led.SubCategoryName }}</label></td>
                        <td><label class="mt-checkbox mt-checkbox-outline checkbox-nolabel"> {{led.Code }}</label></td>
                        <td><input danphe-auto-complete class="form-control" [(ngModel)]="led.LedgerName"
                            [source]="ledgerListAutoComplete" placeholder="Ledger Name"
                            display-property-name="LedgerName" value-property-name=null [grid-sort]="'LedgerName'"
                            (focusout)="AssignSelectedLedger(i)" [list-formatter]="LedgerListFormatter"
                            max-num-list="15" onclick="this.select()" id="Ledger_{{i+1}}" match-formatted="true"
                            style="width: 100%;" [ngStyle]="{'color':led.IsMapped==true ? 'green' : 'red' }"
                            [disabled]="!led.IsSelected" />
                        </td>
                        <td>
                          <input [(ngModel)]="led.Description" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="Description" [disabled]="!led.IsSelected" type="text"
                            maxlength="200"></td>
                        <td><input [(ngModel)]="led.OpeningBalance" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="OpeningBalance" [disabled]="!led.IsSelected" type="number"
                            maxlength="20"></td>
                        <td>
                          <form [formGroup]="led.LedgerValidator">
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Dr" name="Dr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Dr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Dr</label>
                            <label class="mt-checkbox mt-checkbox-outline">
                              <input id="Cr" name="Cr" type="checkbox" (click)="ChangeOpeningBalType($event, i)"
                                [(ngModel)]="led.Cr" [ngModelOptions]="{standalone: true}"
                                [disabled]="!led.IsSelected" />
                              <span></span>Cr </label>
                            <!-- <span class="color-red font-sm"
                                [hidden]="(led.IsValidCheck('Dr','required') || !(led.IsDirty('Dr'))) ||(led.IsValidCheck('Cr','required') || !(led.IsDirty('Cr')))">Opening
                                Balance Type is required</span> -->
                          </form>
                        </td>
                        <td><label class="mt-checkbox mt-checkbox-outline">
                            <input id="IsActive" name="IsActive" type="checkbox"
                              (click)="ChangeOpeningBalType($event, i)" [(ngModel)]="led.IsActive"
                              [ngModelOptions]="{standalone: true}" [disabled]="!led.IsSelected" />
                            <span></span>Active </label></td>
                        <td><input [(ngModel)]="led.TDSPercent" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="TDSPercent" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                        <td><input [(ngModel)]="led.PANNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="PANNo" [disabled]="!led.IsSelected" type="text" maxlength="20"></td>
                        <td><input [(ngModel)]="led.Address" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="Address" [disabled]="!led.IsSelected" type="text" maxlength="200"></td>
                        <td><input [(ngModel)]="led.MobileNo" [ngModelOptions]="{standalone: true}" class="form-control"
                            name="MobileNo" [disabled]="!led.IsSelected" type="number" max="20"></td>
                        <td><input [(ngModel)]="led.LandlineNo" [ngModelOptions]="{standalone: true}"
                            class="form-control" name="LandlineNo" [disabled]="!led.IsSelected" type="number" max="20">
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!-- END: Inventory Subcategory -->

          </div>
           <!-- End : Ledgers list table -->
          <div class="col-md-2 hidden-xs hidden-sm" style="margin-right: 24px;"> </div>
          <div class="row">
            <div class="col-md-12" style="padding-bottom: 10px;">
              <button type="button" class="btn primary-btn" style="float:right;" (click)="AddLedger();"
                [disabled]="loading">
                <i class="fa fa-save"></i>
                Save Ledgers
              </button>
            </div>

          </div>

        </div>
      </div>
    </div>
    <!-- </div> -->
  </div>
</div>
<ledger-group-add *ngIf="showAddLedgerGroupPopUp" [showAddPage]="showAddLedgerGroupPopUp"
  (callback-add)="OnNewLedgerGroupAdded($event)"></ledger-group-add>
